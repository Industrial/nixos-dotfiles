#!/usr/bin/env bash
echo "> update > system"
exec > >(tee ./logs/update-system) 2>&1
set -e

echo "> update > system > cd hosts/$(hostname)"
cd "hosts/$(hostname)"

echo "> update > system > sudo nixos-rebuild switch --flake \".#$(hostname)\" --show-trace"
sudo nixos-rebuild switch --flake ".#$(hostname)" --show-trace --option eval-cache false

cd ../..
bin/update/login-shell "tom"

features/network/ladybird/bin/link-files-nixos
features/programming/cursor/bin/link-files-nixos
