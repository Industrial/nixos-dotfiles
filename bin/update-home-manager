#!/usr/bin/env bash
set -e

source lib/lowercase.bash

HOST=$(lowercase ${1:-"langhus"})
echo "bin/update-home-manager > host: ${HOST}"

USER=$(lowercase ${2:-$USER})
echo "bin/update-home-manager > user: ${USER}"

echo "bin/update-home-manager > home-manager switch --flake \".#${USER}@${HOST}\" --show-trace"
home-manager switch --flake ".#${USER}@${HOST}" --show-trace